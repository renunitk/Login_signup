<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui/0.4.0/angular-ui.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script> 
<script src="http://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.0/ui-bootstrap-tpls.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

<style type="text/css">
    .bs-example{
    	margin: 20px;
    }
</style>

</head>
<body>
<div ng-app="mainApp" ng-controller="formController">
<div class="conatainer" class="bs-example">
<h3>Information</h3>
<form class="form-horizontal">
 <div class="form-group">
        <label for="inputphone" class="control-label col-xs-2">Phone</label><br>
		 <div class="col-xs-4">	
            <input type="phone" class="form-control" placeholder="Mobile No." ng-model="phone"  required><br>
	    </div>
 </div>
  <div class="form-group">
	<label for="inputEmail" class="control-label col-xs-2">Email</label><br>
	<div class="col-xs-4">
            <input type="email" class="form-control" placeholder="Email" ng-model="email" value="{{email}}" required><br>
	</div>
  </div>
 <div class="form-group">
            <div class="col-xs-offset-2 col-xs-10">
                <button type="submit" class="btn btn-primary">Book</button>
            </div>
</div>

</form>

</div>
</div>
<script>
var app = angular.module("mainApp", []);

app.controller('formController', ['$scope', '$http' ,function($scope, $http) {
    $scope.$watch('phone', function (tmpStr)
    {
      console.log(tmpStr);
      if (!tmpStr || tmpStr.length === 0)
        return 0;
        // if searchStr is still the same..
        // go ahead and retrieve the data
        if (tmpStr === $scope.phone)
        {
			
			console.log($scope.phone);
			//error:.$scope is not defined
			$http.get("exam.php?phone=".$scope.phone).
			success(function(data, status, headers, config) {
			//data=[{"email":"renurozera@gmail.com"}]
			console.log(data[0].email);
			$scope.email = data[0].email;
			$scope.$apply();
			}).
				error(function(data, status, headers, config) {
				// log error
				alert("error");
			});
		}
    });
}]);

</script>
</body>
</html>
